<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إدارة المتاجر - النظام الرئيسي</title>
    <style>
        /* Add similar styles as index.html */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f7fafc;
            margin: 0;
            padding: 20px;
        }
        .store-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .store-online { border-right: 4px solid #48bb78; }
        .store-offline { border-right: 4px solid #f56565; }
        .status-online { color: #48bb78; }
        .status-offline { color: #f56565; }
    </style>
</head>
<body>
    <h1>🏪 إدارة المتاجر</h1>
    <button onclick="syncAllStores()">🔄 مزامنة جميع المتاجر</button>
    <div id="storesContainer"></div>

    <script>
        async function loadStores() {
            const response = await fetch('/api/stores');
            const stores = await response.json();
            
            document.getElementById('storesContainer').innerHTML = stores.map(store => `
                <div class="store-card ${store.status}">
                    <h3>${store.name}</h3>
                    <p>📍 ${store.location}</p>
                    <p class="status-${store.status}">${store.status === 'online' ? '🟢 متصل' : '🔴 غير متصل'}</p>
                    <p>📞 ${store.url}</p>
                    <button onclick="syncStore('${store.storeId}')">مزامنة المنتجات</button>
                </div>
            `).join('');
        }

        async function syncStore(storeId) {
            const response = await fetch(`/api/stores/${storeId}/sync-products`, { method: 'POST' });
            const result = await response.json();
            alert(result.message);
        }

        async function syncAllStores() {
            const response = await fetch('/api/stores/sync-all', { method: 'POST' });
            const result = await response.json();
            alert(result.message);
        }

        loadStores();
        setInterval(loadStores, 30000); // Refresh every 30 seconds
    </script>
</body>
</html>